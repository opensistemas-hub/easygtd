CREATE TABLE action_project (id BIGINT AUTO_INCREMENT, project_id BIGINT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE project_state (id BIGINT AUTO_INCREMENT, type VARCHAR(50) NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE alert_configuration (id BIGINT AUTO_INCREMENT, value VARCHAR(255) NOT NULL, type VARCHAR(255) NOT NULL, user_id BIGINT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX alert_configuration_type_idx (type), INDEX user_id_idx (user_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE bookmark (id BIGINT AUTO_INCREMENT, item_id VARCHAR(255) NOT NULL, user_id BIGINT NOT NULL, value VARCHAR(255) NOT NULL, type VARCHAR(255) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX bookmark_type_idx (type), INDEX user_id_idx (user_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE criteria (id BIGINT AUTO_INCREMENT, value VARCHAR(120) NOT NULL, unit VARCHAR(50), type VARCHAR(30) NOT NULL, user_id BIGINT NOT NULL, INDEX user_id_idx (user_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE saved_search_info (id BIGINT AUTO_INCREMENT, saved_search_id BIGINT NOT NULL, value VARCHAR(120), type VARCHAR(30) NOT NULL, INDEX saved_search_id_idx (saved_search_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE criteria (id BIGINT AUTO_INCREMENT, value VARCHAR(120) NOT NULL, unit VARCHAR(50), type VARCHAR(30) NOT NULL, user_id BIGINT NOT NULL, INDEX criteria_type_idx (type), INDEX user_id_idx (user_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE alert_configuration (id BIGINT AUTO_INCREMENT, value VARCHAR(255) NOT NULL, type VARCHAR(255) NOT NULL, user_id BIGINT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX user_id_idx (user_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE next_action (id BIGINT AUTO_INCREMENT, name VARCHAR(255) NOT NULL, description text, next_action_state_id BIGINT NOT NULL, user_id BIGINT NOT NULL, type VARCHAR(30) NOT NULL, hash VARCHAR(30) NOT NULL, original TINYINT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX user_id_idx (user_id), INDEX next_action_state_id_idx (next_action_state_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE next_action_info (id BIGINT AUTO_INCREMENT, next_action_id BIGINT NOT NULL, value VARCHAR(120), type VARCHAR(30) NOT NULL, INDEX next_action_id_idx (next_action_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE next_action_state (id BIGINT AUTO_INCREMENT, name VARCHAR(50) NOT NULL, type VARCHAR(30) NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE email_to_inbox (id BIGINT AUTO_INCREMENT, value VARCHAR(255), user_id BIGINT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX user_id_idx (user_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE folder (id BIGINT AUTO_INCREMENT, name VARCHAR(255) NOT NULL, user_id BIGINT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, normalized_name VARCHAR(255), UNIQUE INDEX sluggable_idx (normalized_name), INDEX user_id_idx (user_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE index_search (id BIGINT AUTO_INCREMENT, item_id VARCHAR(255) NOT NULL, user_id BIGINT NOT NULL, type VARCHAR(255) NOT NULL, value VARCHAR(255) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX index_search_type_idx (type), INDEX user_id_idx (user_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE invite_a_friend (id BIGINT AUTO_INCREMENT, user_id BIGINT NOT NULL, email VARCHAR(50) NOT NULL, hash VARCHAR(255) NOT NULL, status TINYINT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX user_id_idx (user_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE next_action (id BIGINT AUTO_INCREMENT, name VARCHAR(255) NOT NULL, description text, next_action_state_id BIGINT NOT NULL, user_id BIGINT NOT NULL, type VARCHAR(30) NOT NULL, hash VARCHAR(30) NOT NULL, original TINYINT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX next_action_type_idx (type), INDEX user_id_idx (user_id), INDEX next_action_state_id_idx (next_action_state_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE next_action_attachment (id BIGINT AUTO_INCREMENT, value VARCHAR(255) NOT NULL, next_action_id BIGINT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, normalized_value VARCHAR(255), UNIQUE INDEX sluggable_idx (normalized_value), INDEX next_action_id_idx (next_action_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE next_action_criteria (id BIGINT AUTO_INCREMENT, next_action_id BIGINT NOT NULL, criteria_id BIGINT NOT NULL, INDEX next_action_id_idx (next_action_id), INDEX criteria_id_idx (criteria_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE index_search (id BIGINT AUTO_INCREMENT, item_id VARCHAR(255) NOT NULL, user_id BIGINT NOT NULL, type VARCHAR(255) NOT NULL, value VARCHAR(255) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX user_id_idx (user_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE next_action_info (id BIGINT AUTO_INCREMENT, next_action_id BIGINT NOT NULL, value VARCHAR(120), type VARCHAR(30) NOT NULL, INDEX next_action_info_type_idx (type), INDEX next_action_id_idx (next_action_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE next_action_project (id BIGINT AUTO_INCREMENT, project_id BIGINT NOT NULL, next_action_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX next_action_id_idx (next_action_id), INDEX project_id_idx (project_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE next_action_state (id BIGINT AUTO_INCREMENT, name VARCHAR(50) NOT NULL, type VARCHAR(30) NOT NULL, INDEX next_action_state_type_idx (type), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE next_action_stuff (id BIGINT AUTO_INCREMENT, stuff_id BIGINT NOT NULL, next_action_id BIGINT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX next_action_id_idx (next_action_id), INDEX stuff_id_idx (stuff_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE bookmark (id BIGINT AUTO_INCREMENT, item_id VARCHAR(255) NOT NULL, user_id BIGINT NOT NULL, value VARCHAR(255) NOT NULL, type VARCHAR(255) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX user_id_idx (user_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE no_actionable_item (id BIGINT AUTO_INCREMENT, name VARCHAR(255) NOT NULL, description text, type VARCHAR(30) NOT NULL, user_id BIGINT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, normalized_name VARCHAR(255), INDEX no_actionable_item_type_idx (type), UNIQUE INDEX sluggable_idx (normalized_name), INDEX user_id_idx (user_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE no_actionable_item_attachment (id BIGINT AUTO_INCREMENT, value VARCHAR(255) NOT NULL, no_actionable_item_id BIGINT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, normalized_value VARCHAR(255), UNIQUE INDEX sluggable_idx (normalized_value), INDEX no_actionable_item_id_idx (no_actionable_item_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE no_actionable_item_folder (id BIGINT AUTO_INCREMENT, no_actionable_item_id BIGINT NOT NULL, folder_id BIGINT NOT NULL, INDEX no_actionable_item_id_idx (no_actionable_item_id), INDEX folder_id_idx (folder_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE no_actionable_item_info (id BIGINT AUTO_INCREMENT, no_actionable_item_id BIGINT NOT NULL, value VARCHAR(120), type VARCHAR(30) NOT NULL, INDEX no_actionable_item_info_type_idx (type), INDEX no_actionable_item_id_idx (no_actionable_item_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE no_actionable_item_project (id BIGINT AUTO_INCREMENT, project_id BIGINT NOT NULL, no_actionable_item_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX no_actionable_item_id_idx (no_actionable_item_id), INDEX project_id_idx (project_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE project (id BIGINT AUTO_INCREMENT, name VARCHAR(255) NOT NULL, description text, purpose text, vision text, brainstorming text, project_state_id BIGINT NOT NULL, user_id BIGINT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, normalized_name VARCHAR(255), UNIQUE INDEX sluggable_idx (normalized_name), INDEX user_id_idx (user_id), INDEX project_state_id_idx (project_state_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE project_attachment (id BIGINT AUTO_INCREMENT, value VARCHAR(255) NOT NULL, project_id BIGINT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, normalized_value VARCHAR(255), UNIQUE INDEX sluggable_idx (normalized_value), INDEX project_id_idx (project_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE project_state (id BIGINT AUTO_INCREMENT, type VARCHAR(50) NOT NULL, INDEX project_state_type_idx (type), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE no_actionable_item (id BIGINT AUTO_INCREMENT, name VARCHAR(255) NOT NULL, description text, type VARCHAR(30) NOT NULL, user_id BIGINT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, normalized_name VARCHAR(255), UNIQUE INDEX sluggable_idx (normalized_name), INDEX user_id_idx (user_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE saved_search (id BIGINT AUTO_INCREMENT, name VARCHAR(60) NOT NULL, user_id BIGINT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX user_id_idx (user_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE saved_search_info (id BIGINT AUTO_INCREMENT, saved_search_id BIGINT NOT NULL, value VARCHAR(120), type VARCHAR(30) NOT NULL, INDEX saved_search_info_type_idx (type), INDEX saved_search_id_idx (saved_search_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE stuff (id BIGINT AUTO_INCREMENT, name VARCHAR(255) NOT NULL, description text, user_id BIGINT NOT NULL, stuff_state_id BIGINT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, normalized_name VARCHAR(255), UNIQUE INDEX sluggable_idx (normalized_name), INDEX user_id_idx (user_id), INDEX stuff_state_id_idx (stuff_state_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE stuff_attachment (id BIGINT AUTO_INCREMENT, value VARCHAR(255) NOT NULL, stuff_id BIGINT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, normalized_value VARCHAR(255), UNIQUE INDEX sluggable_idx (normalized_value), INDEX stuff_id_idx (stuff_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE stuff_state (id BIGINT AUTO_INCREMENT, name VARCHAR(50) NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE no_actionable_item_info (id BIGINT AUTO_INCREMENT, no_actionable_item_id BIGINT NOT NULL, value VARCHAR(120), type VARCHAR(30) NOT NULL, INDEX no_actionable_item_id_idx (no_actionable_item_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE sf_guard_group (id BIGINT AUTO_INCREMENT, name VARCHAR(255) UNIQUE, description TEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE sf_guard_group_permission (group_id BIGINT, permission_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(group_id, permission_id)) ENGINE = INNODB;
CREATE TABLE sf_guard_permission (id BIGINT AUTO_INCREMENT, name VARCHAR(255) UNIQUE, description TEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE sf_guard_remember_key (id BIGINT AUTO_INCREMENT, user_id BIGINT, remember_key VARCHAR(32), ip_address VARCHAR(50), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX user_id_idx (user_id), PRIMARY KEY(id, ip_address)) ENGINE = INNODB;
CREATE TABLE sf_guard_user (id BIGINT AUTO_INCREMENT, username VARCHAR(128) NOT NULL UNIQUE, format_date VARCHAR(20) DEFAULT 'dd/MM/yyyy' NOT NULL, algorithm VARCHAR(128) DEFAULT 'sha1' NOT NULL, salt VARCHAR(128), password VARCHAR(128), is_active TINYINT(1) DEFAULT '1', is_super_admin TINYINT(1) DEFAULT '0', last_login DATETIME, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX is_active_idx_idx (is_active), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE sf_guard_user_group (user_id BIGINT, group_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(user_id, group_id)) ENGINE = INNODB;
CREATE TABLE sf_guard_user_permission (user_id BIGINT, permission_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(user_id, permission_id)) ENGINE = INNODB;
ALTER TABLE alert_configuration ADD CONSTRAINT alert_configuration_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE bookmark ADD CONSTRAINT bookmark_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE criteria ADD CONSTRAINT criteria_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id);
ALTER TABLE saved_search_info ADD CONSTRAINT saved_search_info_saved_search_id_saved_search_id FOREIGN KEY (saved_search_id) REFERENCES saved_search(id) ON DELETE CASCADE;
ALTER TABLE next_action ADD CONSTRAINT next_action_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id);
ALTER TABLE next_action ADD CONSTRAINT next_action_next_action_state_id_next_action_state_id FOREIGN KEY (next_action_state_id) REFERENCES next_action_state(id);
ALTER TABLE next_action_info ADD CONSTRAINT next_action_info_next_action_id_next_action_id FOREIGN KEY (next_action_id) REFERENCES next_action(id) ON DELETE CASCADE;
ALTER TABLE email_to_inbox ADD CONSTRAINT email_to_inbox_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE folder ADD CONSTRAINT folder_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id);
ALTER TABLE index_search ADD CONSTRAINT index_search_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE invite_a_friend ADD CONSTRAINT invite_a_friend_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id);
ALTER TABLE next_action_attachment ADD CONSTRAINT next_action_attachment_next_action_id_next_action_id FOREIGN KEY (next_action_id) REFERENCES next_action(id) ON DELETE CASCADE;
ALTER TABLE next_action_criteria ADD CONSTRAINT next_action_criteria_next_action_id_next_action_id FOREIGN KEY (next_action_id) REFERENCES next_action(id) ON DELETE CASCADE;
ALTER TABLE next_action_criteria ADD CONSTRAINT next_action_criteria_criteria_id_criteria_id FOREIGN KEY (criteria_id) REFERENCES criteria(id) ON DELETE CASCADE;
ALTER TABLE next_action_project ADD CONSTRAINT next_action_project_project_id_project_id FOREIGN KEY (project_id) REFERENCES project(id) ON DELETE CASCADE;
ALTER TABLE next_action_project ADD CONSTRAINT next_action_project_next_action_id_next_action_id FOREIGN KEY (next_action_id) REFERENCES next_action(id) ON DELETE CASCADE;
ALTER TABLE next_action_stuff ADD CONSTRAINT next_action_stuff_stuff_id_stuff_id FOREIGN KEY (stuff_id) REFERENCES stuff(id) ON DELETE CASCADE;
ALTER TABLE next_action_stuff ADD CONSTRAINT next_action_stuff_next_action_id_next_action_id FOREIGN KEY (next_action_id) REFERENCES next_action(id) ON DELETE CASCADE;
ALTER TABLE no_actionable_item ADD CONSTRAINT no_actionable_item_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id);
ALTER TABLE no_actionable_item_attachment ADD CONSTRAINT nnni FOREIGN KEY (no_actionable_item_id) REFERENCES no_actionable_item(id) ON DELETE CASCADE;
ALTER TABLE no_actionable_item_folder ADD CONSTRAINT no_actionable_item_folder_folder_id_folder_id FOREIGN KEY (folder_id) REFERENCES folder(id) ON DELETE CASCADE;
ALTER TABLE no_actionable_item_folder ADD CONSTRAINT nnni_1 FOREIGN KEY (no_actionable_item_id) REFERENCES no_actionable_item(id) ON DELETE CASCADE;
ALTER TABLE no_actionable_item_info ADD CONSTRAINT nnni_2 FOREIGN KEY (no_actionable_item_id) REFERENCES no_actionable_item(id) ON DELETE CASCADE;
ALTER TABLE no_actionable_item_project ADD CONSTRAINT no_actionable_item_project_project_id_project_id FOREIGN KEY (project_id) REFERENCES project(id) ON DELETE CASCADE;
ALTER TABLE no_actionable_item_project ADD CONSTRAINT nnni_3 FOREIGN KEY (no_actionable_item_id) REFERENCES no_actionable_item(id) ON DELETE CASCADE;
ALTER TABLE project ADD CONSTRAINT project_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id);
ALTER TABLE project ADD CONSTRAINT project_project_state_id_project_state_id FOREIGN KEY (project_state_id) REFERENCES project_state(id);
ALTER TABLE project_attachment ADD CONSTRAINT project_attachment_project_id_project_id FOREIGN KEY (project_id) REFERENCES project(id) ON DELETE CASCADE;
ALTER TABLE saved_search ADD CONSTRAINT saved_search_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id);
ALTER TABLE stuff ADD CONSTRAINT stuff_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id);
ALTER TABLE stuff ADD CONSTRAINT stuff_stuff_state_id_stuff_state_id FOREIGN KEY (stuff_state_id) REFERENCES stuff_state(id);
ALTER TABLE stuff_attachment ADD CONSTRAINT stuff_attachment_stuff_id_stuff_id FOREIGN KEY (stuff_id) REFERENCES stuff(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_group_permission ADD CONSTRAINT sf_guard_group_permission_permission_id_sf_guard_permission_id FOREIGN KEY (permission_id) REFERENCES sf_guard_permission(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_group_permission ADD CONSTRAINT sf_guard_group_permission_group_id_sf_guard_group_id FOREIGN KEY (group_id) REFERENCES sf_guard_group(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_remember_key ADD CONSTRAINT sf_guard_remember_key_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_group ADD CONSTRAINT sf_guard_user_group_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_group ADD CONSTRAINT sf_guard_user_group_group_id_sf_guard_group_id FOREIGN KEY (group_id) REFERENCES sf_guard_group(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_permission ADD CONSTRAINT sf_guard_user_permission_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_permission ADD CONSTRAINT sf_guard_user_permission_permission_id_sf_guard_permission_id FOREIGN KEY (permission_id) REFERENCES sf_guard_permission(id) ON DELETE CASCADE;
